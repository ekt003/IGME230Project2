<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>Pixel Painter Extended</title>
	<link href="https://fonts.googleapis.com/css?family=Press+Start+2P" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lekton:700" rel="stylesheet">
	<style>
    
    html{
        background-color: lightgray;
    }
	span.cell{
		height:25px;
		width:25px;
		border:.0px solid #aaaaaa; /* actual width & height is 25px because of border */
		background-color: #ffffff;
		padding:0;
		margin:0;
		position:absolute;
	}
	
	/* Get rid of the cell border when it is selected */
	span.cellSelected{
		height:25px;
		width:25px;
		background-color: red;
		padding:0;
		margin:0;
		position:absolute;
	}
	.flexBox {
        border: 1px solid black;
        display: flex; /* or inline-flex */
        flex-direction: row;
        flex-wrap: nowrap;
        height: 850px;
/*        justify-content: center;*/
/*        align-items: stretch;*/
    }
    #flexLeft{
        width: 400px;
        border: 1px solid black;
        order: 1;
    }
    #flexRight{
        display: block;
        width: 400px;
        border: 1px solid black;
        order: 3;
        text-align: left;
        padding-left: 100px: 
        
    }
    #flexMiddle{
        border: 1px solid black;
        order: 2;
        flex-grow: 3;
    }
	#gridContainer{
		top:10%;
		left:0%;
		padding:0;
		display:inline-block;
		position:absolute;
        transform: translate(450px,0%)
	}
	
	#colorChooser{
/*		position: absolute;*/
/*		top: 65px;*/
/*		left:800px;*/
	}
    #hexPicker{
/*		position: absolute;*/
/*		top: 90px;*/
/*		left:800px;*/
	}
    #titleBar{
        border: 1px solid black;
        text-align: center;
        width: auto;
    }
	h1{
		font-family: 'Press Start 2P', cursive;
		font-size:2em;
	}
    h2{
        width: auto;
        margin-top: 10px;
        
        padding: 0;
        font-family: 'Lekton', sans-serif;		
        font-size:18pt;
    }
    h3{
        margin: 0;
        padding: 0;
        font-family: 'Lekton', sans-serif;        
        font-size: 16pt;
    }
	
	</style>
</head>
<body>
<div id="titleBar">
    <h1>Pixel Painter Extended</h1>
</div>
<div class="flexBox">
    <div id="flexLeft">
        <p>this is a bunch of text please dont yell at me im trying really hard.</p>
    </div>
    <div id="flexMiddle">
            <div id="gridContainer"></div>   
    </div>
    <div id="flexRight">
        <h2>Toolbox</h2>
        <h3>Preset Color Picker</h3>
        <select id="colorChooser">
            <option value="aqua">Aqua</option>
            <option value="Bisque">Bisque</option>
            <option value="black">Black</option>
            <option value="blue">Blue</option>
            <option value="brown">Brown</option>
            <option value="chocolate">Chocolate</option>
            <option value="cyan">Cyan</option>
            <option value="DarkGray">Dark Gray</option>
            <option value="green">Green</option>
            <option value="red" selected>Red</option>
            <option value="magenta">Magenta</option>
            <option value="orange">Orange</option>
            <option value="tan">Tan</option>
            <option value="white">White</option>
            <option value="wheat">Wheat</option>
            <option value="WhiteSmoke">WhiteSmoke </option>
            <option value="yellow">Yellow</option>
        </select>
        <h3>Hex Color Picker</h3>
        <input id="hexPicker" type="text" name="hexbox">
        <button type="button" onclick="applyColor()">Apply</button>
        <h3 id="rgbSelector">RGB Color Picker</h3>
        <input id="rgbPickerRed" type="text" name="rgbBoxRed">
        <input id="rgbPickerGreen" type="text" name="rgbBoxGreen">
        <input id="rgbPickerBlue" type="text" name="rgbBoxBlue">
    
        <button type="button" onclick="applyColors()">Apply RGB Values</button>

    </div>
</div>



<script>
    const numCols = 30;
    const numRows = 20;
    const cellWidth = 24;
    const cellSpacing = 2;
    
    const container = document.querySelector("#gridContainer");

    const span = document.createElement("span");
    span.className = 'cell';
    
    const cells = [];
    for (let row = 0; row < numRows; row++){
        cells.push([]);
        for (let col = 0; col < numCols; col++){
            let cell = span.cloneNode();
            cell.style.left = `${col * (cellWidth+cellSpacing)}px`;
            cell.style.top = `${row * (cellWidth+cellSpacing)}px`;
            container.appendChild(cell);
            cells[row][col] = cell;
        }
    }
    
    let color = "red";
    
    container.onclick = fillCell;
    
    function fillCell(e){
        let rect = container.getBoundingClientRect();
        let mouseX = e.clientX - rect.left;
        let mouseY = e.clientY - rect.top;
        let columnWidth = cellWidth+cellSpacing;
        let col = Math.floor(mouseX/columnWidth);
        let row = Math.floor(mouseY/columnWidth);
        let selectedCell = cells[row][col];
        selectedCell.className = "cellSelected";
        selectedCell.style.backgroundColor = color;
        console.log(`${col},${row}`);

    }
    
    let mouseIsDown = false;
    
    container.onmousemove = (e) =>{
        e.preventDefault();
        if (mouseIsDown) fillCell(e);
    }
    
    container.onmousedown = (e) =>{
        e.preventDefault();
        mouseIsDown = true;
    }
    
    window.onmouseup = (e) =>{
        e.preventDefault();
        mouseIsDown = false;
    }
    
    document.querySelector("#colorChooser").onchange = (e)=>{
        color = e.target.value;
    }
    document.querySelector("#hexPicker").onchange = (e)=>{
        console.log("Hex was changed!");
        if(e.target.value.length>=6){
            console.log("I made a Hex!");
            color = "#"+e.target.value;
        }
    }
    let applyColor = () =>{
        let box = document.querySelector("#hexPicker")
        if(box.length>6 || box.length<6){
            console.log("NOT A HEX REEEEEEEEEEEE!")
        }
        else{
            console.log("I made a Hex!");
            color = "#"+box.target.value;
        }
    }

    let applyColors = () =>{
        
        let boxRed = document.querySelector("#rgbPickerRed");
        let boxGreen = document.querySelector("#rgbPickerGreen");
        let boxBlue = document.querySelector("#rgbPickerBlue");


        console.log("Color Generated");

        document.querySelector("#rgbSelector").style.color = "rgb(" + boxRed.value + "," + boxGreen.value + "," + boxBlue.value + ")";
    }

    //Declan Behan and emily
</script>
</body>
</html>
